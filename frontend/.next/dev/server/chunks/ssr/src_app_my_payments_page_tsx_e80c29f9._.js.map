{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/src/app/my/payments/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { Payment } from \"@/types/payment\";\n\nconst PaymentsPage = () => {\n  const [payments, setPayments] = useState<Payment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  useEffect(() => {\n    const fetchPayments = async () => {\n      // 로그인 체크\n      const user = localStorage.getItem(\"user\");\n      if (!user) {\n        router.push(\"/auth/login\");\n        return;\n      }\n\n      const { id: userId } = JSON.parse(user);\n      if (!userId) {\n        router.push(\"/auth/login\");\n        return;\n      }\n\n      try {\n        // ⭐ 백엔드 주소로 요청하도록 수정됨!\n        const response = await fetch(\n          `${process.env.NEXT_PUBLIC_BACKEND_URL}/api/payments?userId=${userId}`\n        );\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch payments\");\n        }\n\n        const data = await response.json();\n        setPayments(data);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : \"Unknown error occurred\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPayments();\n  }, [router]);\n\n  const getStatusBadgeColor = (\n    status: \"SUCCESS\" | \"FAILED\" | \"CANCELLED\" | string\n  ) => {\n    switch (status) {\n      case \"SUCCESS\":\n        return \"bg-green-100 text-green-800\";\n      case \"FAILED\":\n        return \"bg-red-100 text-red-800\";\n      case \"CANCELLED\":\n        return \"bg-yellow-100 text-yellow-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-screen\">\n        Loading...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex justify-center items-center h-screen text-red-500\">\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">Payment History</h1>\n\n      <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\n        <table className=\"min-w-full leading-normal\">\n          <thead>\n            <tr>\n              <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Transaction ID\n              </th>\n              <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Caravan Name\n              </th>\n              <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Amount\n              </th>\n              <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Date\n              </th>\n              <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Status\n              </th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {payments.map((payment) => (\n              <tr key={payment.id}>\n                <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\n                  {payment.id}\n                </td>\n\n                <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\n                  {payment.reservation?.caravan?.name || \"Unknown Caravan\"}\n                </td>\n\n                <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\n                  ₩{payment.amount.toLocaleString()}\n                </td>\n\n                <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\n                  {new Date(payment.createdAt).toLocaleString()}\n                </td>\n\n                <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\n                  <span\n                    className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusBadgeColor(\n                      payment.status\n                    )}`}\n                  >\n                    {payment.status}\n                  </span>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentsPage;"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAMA,MAAM,eAAe;IACnB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,MAAM,gBAAgB;YACpB,SAAS;YACT,MAAM,OAAO,aAAa,OAAO,CAAC;YAClC,IAAI,CAAC,MAAM;gBACT,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM,EAAE,IAAI,MAAM,EAAE,GAAG,KAAK,KAAK,CAAC;YAClC,IAAI,CAAC,QAAQ;gBACX,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,IAAI;gBACF,uBAAuB;gBACvB,MAAM,WAAW,MAAM,MACrB,GAAG,QAAQ,GAAG,CAAC,uBAAuB,CAAC,qBAAqB,EAAE,QAAQ;gBAGxE,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,YAAY;YACd,EAAE,OAAO,KAAK;gBACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAChD,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,sBAAsB,CAC1B;QAEA,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBAA4C;;;;;;IAI/D;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;sBACZ;;;;;;IAGP;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAM,WAAU;;sCACf,8OAAC;sCACC,cAAA,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAA0H;;;;;;kDAGxI,8OAAC;wCAAG,WAAU;kDAA0H;;;;;;kDAGxI,8OAAC;wCAAG,WAAU;kDAA0H;;;;;;kDAGxI,8OAAC;wCAAG,WAAU;kDAA0H;;;;;;kDAGxI,8OAAC;wCAAG,WAAU;kDAA0H;;;;;;;;;;;;;;;;;sCAM5I,8OAAC;sCACE,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDACX,QAAQ,EAAE;;;;;;sDAGb,8OAAC;4CAAG,WAAU;sDACX,QAAQ,WAAW,EAAE,SAAS,QAAQ;;;;;;sDAGzC,8OAAC;4CAAG,WAAU;;gDAAsD;gDAChE,QAAQ,MAAM,CAAC,cAAc;;;;;;;sDAGjC,8OAAC;4CAAG,WAAU;sDACX,IAAI,KAAK,QAAQ,SAAS,EAAE,cAAc;;;;;;sDAG7C,8OAAC;4CAAG,WAAU;sDACZ,cAAA,8OAAC;gDACC,WAAW,CAAC,6CAA6C,EAAE,oBACzD,QAAQ,MAAM,GACb;0DAEF,QAAQ,MAAM;;;;;;;;;;;;mCAvBZ,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCjC;uCAEe"}}]
}