{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/src/components/Navbar.tsx"],"sourcesContent":["'use client'; \n\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useState, useEffect } from 'react';\n\n// ìœ ì € ì •ë³´ íƒ€ì… (localStorageì— ì €ì¥ëœ êµ¬ì¡° ê¸°ë°˜)\ntype StoredUser = {\n    id: string; // ì‹¤ì œ IDëŠ” UUID string\n    name: string;\n    role: string;\n    // userToken ë“± ë‹¤ë¥¸ í•„ë“œê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‚˜, í•„ìš”í•œ ìµœì†Œ ì •ë³´ë§Œ ì •ì˜\n};\n\nexport default function Navbar() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userRole, setUserRole] = useState<string | null>(null);\n  const router = useRouter();\n\n  useEffect(() => {\n    // ğŸš¨ [í•µì‹¬ ìˆ˜ì •] localStorageì—ì„œ 'user' í‚¤ì˜ JSON ê°ì²´ë¥¼ íŒŒì‹±í•˜ì—¬ ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n    if (typeof window !== 'undefined') {\n      const storedUser = localStorage.getItem('user');\n\n      if (storedUser) {\n        try {\n            const user: StoredUser = JSON.parse(storedUser);\n            setIsLoggedIn(true);\n            setUserRole(user.role); // 'user' ê°ì²´ì—ì„œ role ê°’ì„ ì§ì ‘ ê°€ì ¸ì˜µë‹ˆë‹¤.\n            \n            // í† í°ì„ ë³„ë„ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ userToken ëŒ€ì‹  isLoggedInìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬\n        } catch (e) {\n            console.error(\"Failed to parse user data from localStorage:\", e);\n            handleLogout(); // íŒŒì‹± ì˜¤ë¥˜ ì‹œ ê°•ì œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬\n        }\n      } else {\n          setIsLoggedIn(false);\n          setUserRole(null);\n      }\n    }\n  }, []);\n\n  const handleLogout = () => {\n    // ğŸš¨ [ìˆ˜ì •] ë¡œê·¸ì¸ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë‹¨ì¼ í‚¤ 'user'ë§Œ ì œê±°í•©ë‹ˆë‹¤.\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('user'); // 'user' í‚¤ ì œê±°\n      localStorage.removeItem('userToken'); // ê¸°ì¡´ ì½”ë“œì™€ ì¶©ëŒ ë°©ì§€ ë° ì •ë¦¬\n      localStorage.removeItem('userId'); // ê¸°ì¡´ ì½”ë“œì™€ ì¶©ëŒ ë°©ì§€ ë° ì •ë¦¬\n      localStorage.removeItem('userRole'); // ê¸°ì¡´ ì½”ë“œì™€ ì¶©ëŒ ë°©ì§€ ë° ì •ë¦¬\n\n      setIsLoggedIn(false);\n      setUserRole(null);\n      router.push('/'); // Redirect to home page after logout\n    }\n  };\n\n  return (\n    <header className=\"bg-white shadow-sm\">\n      <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo */}\n          <div className=\"flex-shrink-0\">\n            <Link href=\"/\" className=\"text-2xl font-bold text-indigo-600\">\n              CaravanShare\n            </Link>\n          </div>\n\n          {/* Desktop Navigation Links */}\n          <div className=\"hidden md:block\">\n            <div className=\"ml-10 flex items-baseline space-x-4\">\n              <Link href=\"/\" className=\"text-gray-500 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\n                Home\n              </Link>\n              <Link href=\"/caravans\" className=\"text-gray-500 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\n                Explore Caravans\n              </Link>\n\n              {isLoggedIn ? (\n                <>\n                  {/* ğŸš€ [ìƒˆë¡œ ì¶”ê°€ëœ ë¶€ë¶„] 'ë‚´ í”„ë¡œí•„' ë§í¬ ì¶”ê°€ */}\n                  <Link \n                    href=\"/my/profile\" \n                    className=\"text-indigo-600 hover:bg-gray-100 hover:text-indigo-700 px-3 py-2 rounded-md text-sm font-bold\"\n                  >\n                    ë‚´ í”„ë¡œí•„\n                  </Link>\n\n                  {/* ğŸš¨ [í•µì‹¬ ê¸°ëŠ¥] HOST ì „ìš© ë²„íŠ¼ */}\n                  {userRole === 'HOST' && (\n                    <>\n                      {/* ì¹´ë¼ë°˜ ë“±ë¡í•˜ê¸° ë²„íŠ¼ */}\n                      <Link href=\"/host/caravans/new\" className=\"bg-indigo-500 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-600\">\n                        ì¹´ë¼ë°˜ ë“±ë¡í•˜ê¸°\n                      </Link>\n                      {/* ì˜ˆì•½ ê´€ë¦¬ ë²„íŠ¼ */}\n                      <Link href=\"/host/reservations\" className=\"bg-green-500 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-green-600\">\n                        ì˜ˆì•½ ê´€ë¦¬\n                      </Link>\n                    </>\n                  )}\n                  <button\n                    onClick={handleLogout}\n                    className=\"text-gray-500 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium cursor-pointer\"\n                  >\n                    ë¡œê·¸ì•„ì›ƒ\n                  </button>\n                </>\n              ) : (\n                <>\n                  <Link href=\"/auth/login\" className=\"text-gray-500 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\n                    ë¡œê·¸ì¸\n                  </Link>\n                  <Link href=\"/auth/signup\" className=\"text-gray-500 hover:bg-gray-100 hover:hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\n                    íšŒì›ê°€ì…\n                  </Link>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </nav>\n    </header>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAce,SAAS;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IACxD,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,+DAA+D;QAC/D;;IAmBF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,2CAA2C;QAC3C;;IAUF;IAEA,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,uKAAI;4BAAC,MAAK;4BAAI,WAAU;sCAAqC;;;;;;;;;;;kCAMhE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,uKAAI;oCAAC,MAAK;oCAAI,WAAU;8CAA+F;;;;;;8CAGxH,8OAAC,uKAAI;oCAAC,MAAK;oCAAY,WAAU;8CAA+F;;;;;;gCAI/H,2BACC;;sDAEE,8OAAC,uKAAI;4CACH,MAAK;4CACL,WAAU;sDACX;;;;;;wCAKA,aAAa,wBACZ;;8DAEE,8OAAC,uKAAI;oDAAC,MAAK;oDAAqB,WAAU;8DAAwF;;;;;;8DAIlI,8OAAC,uKAAI;oDAAC,MAAK;oDAAqB,WAAU;8DAAsF;;;;;;;;sDAKpI,8OAAC;4CACC,SAAS;4CACT,WAAU;sDACX;;;;;;;iEAKH;;sDACE,8OAAC,uKAAI;4CAAC,MAAK;4CAAc,WAAU;sDAA+F;;;;;;sDAGlI,8OAAC,uKAAI;4CAAC,MAAK;4CAAe,WAAU;sDAAqG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAW3J"}}]
}