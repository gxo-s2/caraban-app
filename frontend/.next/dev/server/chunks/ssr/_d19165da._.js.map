{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/src/app/host/reservations/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { ReservationStatus } from '@/types/backend-enums';\n\n// Define types for the data\ntype Reservation = {\n  id: string;\n  startDate: string;\n  endDate: string;\n  totalPrice: number;\n  status: ReservationStatus;\n  guest: {\n    name: string;\n    email: string;\n  };\n  caravan: {\n    name: string;\n  };\n};\n\n// Helper to format dates\nconst formatDate = (dateString: string) => {\n  return new Date(dateString).toLocaleDateString('ko-KR', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n};\n\n// Helper to get status badge colors\nconst getStatusBadgeColor = (status: ReservationStatus) => {\n  switch (status) {\n    case ReservationStatus.PENDING:\n      return 'bg-yellow-100 text-yellow-800';\n    case ReservationStatus.CONFIRMED:\n      return 'bg-green-100 text-green-800';\n    case ReservationStatus.CANCELLED:\n      return 'bg-red-100 text-red-800';\n    default:\n      return 'bg-gray-100 text-gray-800';\n  }\n};\n\nexport default function HostReservationsPage() {\n  const [reservations, setReservations] = useState<Reservation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // For demo, get hostId from localStorage\n  const hostId = typeof window !== 'undefined' ? localStorage.getItem('userId') : null;\n\n  useEffect(() => {\n    if (!hostId) {\n      setError('Host ID not found. Please log in as a host.');\n      setLoading(false);\n      return;\n    }\n\n    async function fetchHostReservations() {\n      try {\n        const res = await fetch(`http://localhost:3001/api/reservations/host/${hostId}`);\n        if (!res.ok) {\n          throw new Error('Failed to fetch reservations.');\n        }\n        const data = await res.json();\n        setReservations(data);\n      } catch (err: any) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchHostReservations();\n  }, [hostId]);\n\n  const handleStatusUpdate = async (reservationId: string, status: ReservationStatus) => {\n    try {\n      const res = await fetch(`http://localhost:3001/api/reservations/${reservationId}/status`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ status }),\n      });\n\n      if (!res.ok) {\n        throw new Error('Failed to update reservation status.');\n      }\n\n      // Update the status in the local state to reflect the change immediately\n      setReservations(reservations.map(r => \n        r.id === reservationId ? { ...r, status: status } : r\n      ));\n    } catch (err: any) {\n      alert(`Error: ${err.message}`);\n    }\n  };\n  \n  if (!hostId) {\n    // A simple guard for users who are not logged in as hosts.\n    // In a real app, this would be handled by middleware or a higher-order component.\n     return (\n      <main className=\"bg-gray-50 min-h-screen p-8\">\n        <div className=\"max-w-7xl mx-auto text-center\">\n            <h1 className=\"text-2xl font-bold text-red-600\">Access Denied</h1>\n            <p className=\"mt-2 text-gray-600\">You must be logged in as a host to view this page.</p>\n        </div>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"bg-gray-50 min-h-screen p-4 sm:p-8\">\n      <div className=\"max-w-7xl mx-auto\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">예약 관리</h1>\n        \n        {loading && <p>Loading reservations...</p>}\n        {error && <p className=\"text-red-500\">{error}</p>}\n\n        {!loading && reservations.length === 0 && (\n          <p>No reservations found for your caravans.</p>\n        )}\n\n        <div className=\"bg-white shadow overflow-hidden rounded-lg\">\n          <ul className=\"divide-y divide-gray-200\">\n            {reservations.map((reservation) => (\n              <li key={reservation.id} className=\"p-4 sm:p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm font-semibold text-indigo-600 truncate\">{reservation.caravan.name}</p>\n                    <p className=\"mt-1 text-sm text-gray-700\">\n                      <span className=\"font-medium\">Guest:</span> {reservation.guest.name} ({reservation.guest.email})\n                    </p>\n                    <p className=\"mt-1 text-sm text-gray-500\">\n                      {formatDate(reservation.startDate)} - {formatDate(reservation.endDate)}\n                    </p>\n                  </div>\n                  <div className=\"flex-shrink-0 ml-4 flex flex-col items-end space-y-2\">\n                    <p className=\"font-semibold\">${reservation.totalPrice.toFixed(2)}</p>\n                    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeColor(reservation.status)}`}>\n                      {reservation.status}\n                    </span>\n                  </div>\n                </div>\n                {reservation.status === ReservationStatus.PENDING && (\n                  <div className=\"mt-4 flex justify-end space-x-3\">\n                    <button\n                      onClick={() => handleStatusUpdate(reservation.id, ReservationStatus.CONFIRMED)}\n                      className=\"px-3 py-1 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700\"\n                    >\n                      승인\n                    </button>\n                    <button\n                      onClick={() => handleStatusUpdate(reservation.id, ReservationStatus.CANCELLED)}\n                      className=\"px-3 py-1 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700\"\n                    >\n                      거절\n                    </button>\n                  </div>\n                )}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;;AAFA;;;;AAqBA,yBAAyB;AACzB,MAAM,aAAa,CAAC;IAClB,OAAO,IAAI,KAAK,YAAY,kBAAkB,CAAC,SAAS;QACtD,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF;AAEA,oCAAoC;AACpC,MAAM,sBAAsB,CAAC;IAC3B,OAAQ;QACN,KAAK,kBAAkB,OAAO;YAC5B,OAAO;QACT,KAAK,kBAAkB,SAAS;YAC9B,OAAO;QACT,KAAK,kBAAkB,SAAS;YAC9B,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEe,SAAS;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,yCAAyC;IACzC,MAAM,SAAS,sCAAgC,0BAAiC;IAEhF,IAAA,kNAAS,EAAC;QACR,wCAAa;YACX,SAAS;YACT,WAAW;YACX;QACF;;;QAEA,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,CAAC,4CAA4C,EAAE,QAAQ;gBAC/E,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,MAAM,IAAI,MAAM;gBAClB;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,gBAAgB;YAClB,EAAE,OAAO,KAAU;gBACjB,SAAS,IAAI,OAAO;YACtB,SAAU;gBACR,WAAW;YACb;QACF;IAGF,GAAG;QAAC;KAAO;IAEX,MAAM,qBAAqB,OAAO,eAAuB;QACvD,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,uCAAuC,EAAE,cAAc,OAAO,CAAC,EAAE;gBACxF,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAO;YAChC;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM;YAClB;YAEA,yEAAyE;YACzE,gBAAgB,aAAa,GAAG,CAAC,CAAA,IAC/B,EAAE,EAAE,KAAK,gBAAgB;oBAAE,GAAG,CAAC;oBAAE,QAAQ;gBAAO,IAAI;QAExD,EAAE,OAAO,KAAU;YACjB,MAAM,CAAC,OAAO,EAAE,IAAI,OAAO,EAAE;QAC/B;IACF;IAEA,wCAAa;QACX,2DAA2D;QAC3D,kFAAkF;QACjF,qBACC,8OAAC;YAAK,WAAU;sBACd,cAAA,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI5C;;;AA0DF"}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}