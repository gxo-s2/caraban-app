{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/src/app/my/reservations/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Link from 'next/link';\nimport { Reservation } from '@/types/reservation';\n\n// Helper function to format dates\nconst formatDate = (dateString: string) => {\n  return new Date(dateString).toISOString().split('T')[0];\n};\n\n// Helper function to format currency\nconst formatCurrency = (amount: number) => {\n  return new Intl.NumberFormat('ko-KR', { style: 'currency', currency: 'KRW' }).format(amount);\n};\n\n// Badge component for reservation status\nconst StatusBadge = ({ status }: { status: Reservation['status'] }) => {\n  const statusStyles: { [key in Reservation['status']]: string } = {\n    PENDING: 'bg-yellow-100 text-yellow-800',\n    CONFIRMED: 'bg-green-100 text-green-800',\n    CANCELLED: 'bg-red-100 text-red-800',\n  };\n\n  return (\n    <span className={`px-3 py-1 text-sm font-semibold rounded-full ${statusStyles[status]}`}>\n      {status}\n    </span>\n  );\n};\n\n// Loading Skeleton component\nconst ReservationCardSkeleton = () => (\n  <div className=\"bg-white rounded-lg shadow-md overflow-hidden animate-pulse\">\n    <div className=\"bg-gray-300 h-56 w-full\"></div>\n    <div className=\"p-6\">\n      <div className=\"h-6 bg-gray-300 rounded w-3/4 mb-4\"></div>\n      <div className=\"h-4 bg-gray-300 rounded w-1/2 mb-2\"></div>\n      <div className=\"h-4 bg-gray-300 rounded w-1/2 mb-4\"></div>\n      <div className=\"h-4 bg-gray-300 rounded w-1/3\"></div>\n    </div>\n  </div>\n);\n\n\nconst MyReservationsPage = () => {\n  const [reservations, setReservations] = useState<Reservation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchReservations = async () => {\n      setLoading(true);\n      try {\n        const userString = localStorage.getItem('user');\n        if (!userString) {\n          setError(\"로그인이 필요합니다.\");\n          return;\n        }\n        \n        const user = JSON.parse(userString);\n        if (!user || !user.id) {\n          setError(\"사용자 정보를 찾을 수 없습니다.\");\n          return;\n        }\n\n        const response = await axios.get(`http://localhost:3001/api/reservations/user/${user.id}`);\n        setReservations(response.data);\n      } catch (err) {\n        setError(\"예약 내역을 불러오는데 실패했습니다.\");\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchReservations();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <h1 className=\"text-3xl font-bold mb-8\">내 예약 목록</h1>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n          <ReservationCardSkeleton />\n          <ReservationCardSkeleton />\n          <ReservationCardSkeleton />\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[60vh]\">\n        <p className=\"text-red-500 text-xl\">{error}</p>\n        <Link href=\"/auth/login\" className=\"mt-4 bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition\">\n          로그인 페이지로\n        </Link>\n      </div>\n    );\n  }\n\n  if (reservations.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[60vh] text-center\">\n        <h2 className=\"text-2xl font-semibold mb-4\">아직 예약된 여행이 없습니다.</h2>\n        <p className=\"text-gray-600 mb-8\">새로운 여행을 계획하고 멋진 카라반을 예약해보세요!</p>\n        <Link href=\"/caravans\" className=\"bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition\">\n          카라반 둘러보기\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <h1 className=\"text-3xl font-bold mb-8\">내 예약 목록</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n        {reservations.map((reservation) => (\n          <div key={reservation.id} className=\"bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105\">\n            <div className=\"relative\">\n              <img \n                src={reservation.caravan.imageUrl || 'https://via.placeholder.com/400x300?text=No+Image'} \n                alt={reservation.caravan.name} \n                className=\"w-full h-56 object-cover\" \n              />\n              <div className=\"absolute top-4 right-4\">\n                <StatusBadge status={reservation.status} />\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <p className=\"text-sm text-gray-500 mb-1\">{reservation.caravan.location}</p>\n              <h3 className=\"text-2xl font-bold mb-3 truncate\">{reservation.caravan.name}</h3>\n              <div className=\"space-y-2 text-gray-700\">\n                <p>\n                  <span className=\"font-semibold\">예약 날짜:</span> {formatDate(reservation.startDate)} ~ {formatDate(reservation.endDate)}\n                </p>\n                <p>\n                  <span className=\"font-semibold\">총 결제 금액:</span> {formatCurrency(reservation.totalPrice)}\n                </p>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default MyReservationsPage;\n"],"names":[],"mappings":"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"}}]
}