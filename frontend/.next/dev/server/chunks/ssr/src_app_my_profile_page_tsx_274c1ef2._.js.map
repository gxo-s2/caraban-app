{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/src/app/my/profile/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { User } from '@/types/user';\n\nconst ProfilePage = () => {\n  const [user, setUser] = useState<User | null>(null);\n  const [name, setName] = useState('');\n  const [contactNumber, setContactNumber] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const router = useRouter();\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const storedUser = localStorage.getItem('user');\n      if (!storedUser) {\n        router.push('/auth/login');\n        return;\n      }\n\n      const { id: userId } = JSON.parse(storedUser);\n      if (!userId) {\n        router.push('/auth/login');\n        return;\n      }\n\n      try {\n        // This is a placeholder for the actual API endpoint.\n        const response = await fetch(`/api/users/${userId}`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch user data');\n        }\n        const data: User = await response.json();\n        setUser(data);\n        setName(data.name);\n        setContactNumber(data.contactNumber || '');\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'An unknown error occurred');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUser();\n  }, [router]);\n\n  const handleUpdate = async () => {\n    if (!user) return;\n\n    try {\n      const response = await fetch(`/api/users/${user.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ name, contactNumber }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update user data');\n      }\n\n      const updatedUser: User = await response.json();\n      setUser(updatedUser);\n      setName(updatedUser.name);\n      setContactNumber(updatedUser.contactNumber || '');\n      setIsEditing(false);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An unknown error occurred');\n    }\n  };\n\n  if (loading) {\n    return <div className=\"flex justify-center items-center h-screen\">Loading...</div>;\n  }\n\n  if (error) {\n    return <div className=\"flex justify-center items-center h-screen text-red-500\">{error}</div>;\n  }\n\n  if (!user) {\n    return null; \n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">My Profile</h1>\n      <div className=\"bg-white shadow-md rounded-lg p-6\">\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Name</label>\n          {isEditing ? (\n            <input\n              type=\"text\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            />\n          ) : (\n            <p className=\"text-gray-900\">{user.name}</p>\n          )}\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Email</label>\n          <p className=\"text-gray-900\">{user.email}</p>\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Contact Number</label>\n          {isEditing ? (\n            <input\n              type=\"text\"\n              value={contactNumber}\n              onChange={(e) => setContactNumber(e.target.value)}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            />\n          ) : (\n            <p className=\"text-gray-900\">{user.contactNumber || 'Not provided'}</p>\n          )}\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Rating</label>\n          <p className=\"text-gray-900\">{user.rating ? `${user.rating.toFixed(1)} / 5.0` : 'No ratings yet'}</p>\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Identity Verification</label>\n          <span\n            className={`px-3 py-1 text-sm font-semibold leading-tight rounded-full ${\n              user.isVerified ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n            }`}\n          >\n            {user.isVerified ? 'Verified' : 'Not Verified'}\n          </span>\n        </div>\n        <div className=\"mt-6\">\n          {isEditing ? (\n            <button\n              onClick={handleUpdate}\n              className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n            >\n              Save\n            </button>\n          ) : (\n            <button\n              onClick={() => setIsEditing(true)}\n              className=\"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n            >\n              Edit Profile\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilePage;\n"],"names":[],"mappings":"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"}}]
}