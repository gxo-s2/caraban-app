{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport axios from 'axios';\nimport { useRouter } from 'next/navigation';\n\n// --- TYPE DEFINITIONS ---\ninterface User {\n  id: string;\n  name: string;\n  role: 'GUEST' | 'HOST';\n}\n\ninterface Reservation {\n  id: string;\n  startDate: string;\n  endDate: string;\n  totalPrice: number;\n  status: 'PENDING' | 'CONFIRMED' | 'CANCELLED';\n  caravan: { name: string };\n  guest: { name: string };\n}\n\n// --- STATUS BADGE COMPONENT ---\nconst StatusBadge = ({ status }: { status: Reservation['status'] }) => {\n  const styles = {\n    PENDING: 'bg-yellow-100 text-yellow-800',\n    CONFIRMED: 'bg-green-100 text-green-800',\n    CANCELLED: 'bg-red-100 text-red-800',\n  };\n  const text = {\n    PENDING: '대기중',\n    CONFIRMED: '승인됨',\n    CANCELLED: '거절/취소됨',\n  };\n  return (\n    <span className={`px-3 py-1 text-xs font-semibold rounded-full ${styles[status]}`}>\n      {text[status]}\n    </span>\n  );\n};\n\n// --- GUEST LANDING PAGE ---\nconst GuestLandingPage = () => (\n  <main className=\"flex-grow\">\n    <div className=\"max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8 text-center\">\n      <h1 className=\"text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl\">\n        <span className=\"block\">Find Your Next</span>\n        <span className=\"block text-indigo-600\">Adventure on Wheels</span>\n      </h1>\n      <p className=\"mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl\">\n        Rent unique caravans from trusted hosts around the world. Your next journey awaits.\n      </p>\n      <div className=\"mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8\">\n        <div className=\"rounded-md shadow\">\n          <Link href=\"/caravans\" className=\"w-full flex items-center justify-center px-8 py-3 border text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700\">\n            Explore Caravans\n          </Link>\n        </div>\n      </div>\n    </div>\n  </main>\n);\n\n// --- HOST DASHBOARD ---\nconst HostDashboard = ({ user }: { user: User }) => {\n  const [reservations, setReservations] = useState<Reservation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  const fetchReservations = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`http://127.0.0.1:3001/api/reservations/host/${user.id}`);\n      setReservations(response.data);\n    } catch (error) {\n      console.error(\"Failed to fetch reservations\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (user.id) {\n      fetchReservations();\n    }\n  }, [user.id]);\n\n  const handleUpdateStatus = async (id: string, status: 'CONFIRMED' | 'CANCELLED') => {\n    try {\n      await axios.patch(`http://127.0.0.1:3001/api/reservations/${id}/status`, { status });\n      alert(`예약이 ${status === 'CONFIRMED' ? '승인' : '거절'}되었습니다.`);\n      fetchReservations(); // Refresh the list\n    } catch (error) {\n      console.error(\"Failed to update reservation status\", error);\n      alert(\"상태 변경에 실패했습니다.\");\n    }\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-800\">\n          안녕하세요, {user.name} 호스트님!\n        </h1>\n        <Link href=\"/caravans/new\" className=\"px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700\">\n          + 새 카라반 등록\n        </Link>\n      </div>\n\n      <div className=\"bg-white rounded-xl shadow-sm border\">\n        <h2 className=\"text-xl font-semibold p-6\">최근 예약 요청</h2>\n        {loading ? <p className=\"p-6\">예약 목록을 불러오는 중...</p> : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm text-left text-gray-500\">\n              <thead className=\"text-xs text-gray-700 uppercase bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3\">카라반</th>\n                  <th className=\"px-6 py-3\">게스트</th>\n                  <th className=\"px-6 py-3\">일정</th>\n                  <th className=\"px-6 py-3\">금액</th>\n                  <th className=\"px-6 py-3\">상태</th>\n                  <th className=\"px-6 py-3\">관리</th>\n                </tr>\n              </thead>\n              <tbody>\n                {reservations.map(res => (\n                  <tr key={res.id} className=\"bg-white border-b hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 font-medium text-gray-900\">{res.caravan.name}</td>\n                    <td className=\"px-6 py-4\">{res.guest.name}</td>\n                    <td className=\"px-6 py-4\">{new Date(res.startDate).toLocaleDateString()} - {new Date(res.endDate).toLocaleDateString()}</td>\n                    <td className=\"px-6 py-4\">₩{res.totalPrice.toLocaleString()}</td>\n                    <td className=\"px-6 py-4\"><StatusBadge status={res.status} /></td>\n                    <td className=\"px-6 py-4\">\n                      {res.status === 'PENDING' && (\n                        <div className=\"flex gap-2\">\n                          <button onClick={() => handleUpdateStatus(res.id, 'CONFIRMED')} className=\"font-medium text-green-600 hover:underline\">승인</button>\n                          <button onClick={() => handleUpdateStatus(res.id, 'CANCELLED')} className=\"font-medium text-red-600 hover:underline\">거절</button>\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// --- MAIN HOME PAGE (Controller) ---\nexport default function HomePage() {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n    }\n    setLoading(false);\n  }, []);\n\n  if (loading) {\n    return <div className=\"min-h-screen flex items-center justify-center\">로딩 중...</div>;\n  }\n\n  if (user && user.role === 'HOST') {\n    return <HostDashboard user={user} />;\n  }\n\n  return <GuestLandingPage />;\n}\n"],"names":[],"mappings":"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"}}]
}